<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title or "Aoede - Enterprise AI Code Generation Platform" }}</title>
    
    <!-- Meta Tags for SEO and Social -->
    <meta name="description" content="Enterprise-grade AI-powered code generation platform for professional development teams">
    <meta name="keywords" content="AI, code generation, enterprise, development, automation">
    <meta name="author" content="Aoede Technologies">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/apple-touch-icon.png">    <!-- External Stylesheets -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
      <!-- Custom Styles -->
    <link href="/static/css/style.css" rel="stylesheet">
    
    <!-- Tailwind Config -->
    <script>
        // Tailwind configuration
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'Monaco', 'monospace'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                            950: '#082f49'
                        },
                        gray: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                            950: '#020617'
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'slide-down': 'slideDown 0.3s ease-out',
                        'scale-in': 'scaleIn 0.2s ease-out',
                        'pulse-subtle': 'pulseSubtle 2s ease-in-out infinite',
                    }
                }
            }
        };
    </script>
</head>

<body class="font-sans bg-gray-50 text-gray-900 antialiased">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-gray-600 font-medium">Loading Aoede Platform...</p>
        </div>
    </div>

    <!-- Header Navigation -->
    <header class="fixed top-0 left-0 right-0 bg-white-95 backdrop-blur-lg border-b border-gray-200 z-40">
        <nav class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center">
                        <i class="fas fa-code text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900">Aoede</h1>
                        <p class="text-xs text-gray-500 -mt-1">AI Code Platform</p>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="showSection('dashboard')" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-chart-pie"></i>
                        <span>Dashboard</span>
                    </button>
                    <button onclick="showSection('projects')" class="nav-link" data-section="projects">
                        <i class="fas fa-folder-open"></i>
                        <span>Projects</span>
                    </button>
                    <button onclick="showSection('generate')" class="nav-link" data-section="generate">
                        <i class="fas fa-magic"></i>
                        <span>Generate</span>
                    </button>
                    <button onclick="showSection('analyze')" class="nav-link" data-section="analyze">
                        <i class="fas fa-search"></i>
                        <span>Analyze</span>
                    </button>
                    <button onclick="showSection('models')" class="nav-link" data-section="models">
                        <i class="fas fa-brain"></i>
                        <span>Models</span>
                    </button>
                </div>

                <!-- User Menu / Auth Buttons -->
                <div class="flex items-center space-x-4">
                    <!-- Authentication Buttons (shown when not logged in) -->
                    <div id="authButtons" class="flex items-center space-x-3">
                        <button onclick="showAuthModal('login')" class="btn-secondary">
                            <i class="fas fa-sign-in-alt"></i>
                            Sign In
                        </button>
                        <button onclick="showAuthModal('register')" class="btn-primary">
                            <i class="fas fa-user-plus"></i>
                            Get Started
                        </button>
                    </div>

                    <!-- User Menu (shown when logged in) -->
                    <div id="userMenu" class="relative hidden">
                        <button onclick="toggleUserMenu()" class="flex items-center space-x-3 p-2 rounded-xl bg-gray-100 hover:bg-gray-200 transition-colors">
                            <img id="userAvatar" src="" alt="User" class="w-9 h-9 rounded-lg border-2 border-white shadow-sm">
                            <div class="hidden md:block text-left">
                                <div id="userName" class="text-sm font-semibold text-gray-900"></div>
                                <div id="userEmail" class="text-xs text-gray-500"></div>
                            </div>
                            <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
                        </button>

                        <!-- User Dropdown -->
                        <div id="userMenuDropdown" class="hidden absolute right-0 mt-2 w-72 bg-white rounded-2xl shadow-xl border border-gray-200 py-2 z-50">
                            <div class="px-4 py-3 border-b border-gray-100">
                                <p id="userMenuName" class="font-semibold text-gray-900"></p>
                                <p id="userMenuEmail" class="text-sm text-gray-500"></p>
                            </div>
                            <div class="py-1">
                                <a href="#" onclick="showUserProfile()" class="user-menu-item">
                                    <i class="fas fa-user"></i>
                                    Profile Settings
                                </a>
                                <a href="#" onclick="showUserSettings()" class="user-menu-item">
                                    <i class="fas fa-cog"></i>
                                    Preferences
                                </a>
                                <a href="#" onclick="showBilling()" class="user-menu-item">
                                    <i class="fas fa-credit-card"></i>
                                    Billing & Usage
                                </a>
                            </div>
                            <div class="border-t border-gray-100 pt-1">
                                <button onclick="logout()" class="user-menu-item text-red-600 hover:bg-red-50 w-full text-left">
                                    <i class="fas fa-sign-out-alt"></i>
                                    Sign Out
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button onclick="toggleMobileMenu()" class="md:hidden p-2 rounded-lg bg-gray-100 hover:bg-gray-200">
                        <i class="fas fa-bars text-gray-600"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Mobile Navigation -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-gray-200">
            <div class="px-6 py-4 space-y-3">
                <button onclick="showSection('dashboard')" class="mobile-nav-link active" data-section="dashboard">
                    <i class="fas fa-chart-pie"></i>
                    Dashboard
                </button>
                <button onclick="showSection('projects')" class="mobile-nav-link" data-section="projects">
                    <i class="fas fa-folder-open"></i>
                    Projects
                </button>
                <button onclick="showSection('generate')" class="mobile-nav-link" data-section="generate">
                    <i class="fas fa-magic"></i>
                    Generate
                </button>
                <button onclick="showSection('analyze')" class="mobile-nav-link" data-section="analyze">
                    <i class="fas fa-search"></i>
                    Analyze
                </button>
                <button onclick="showSection('models')" class="mobile-nav-link" data-section="models">
                    <i class="fas fa-brain"></i>
                    Models
                </button>
            </div>
        </div>    </header>

    <!-- GitHub Models Service Alert -->
    <div id="githubModelsAlert" class="fixed top-16 left-0 right-0 bg-orange-50 border-b border-orange-200 px-6 py-3 z-30">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-orange-500"></i>
                </div>
                <div>
                    <p class="text-sm text-orange-800">
                        <span class="font-medium">Service Notice:</span>
                        Since GitHub models are currently down, some AI features may not work properly. We apologize for the inconvenience.
                    </p>
                </div>
            </div>
            <button onclick="dismissAlert('githubModelsAlert')" class="flex-shrink-0 text-orange-400 hover:text-orange-600 transition-colors">
                <i class="fas fa-times"></i>
                <span class="sr-only">Dismiss</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-16 min-h-screen github-alert-spacing">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="max-w-7xl mx-auto px-6 lg:px-8 py-8">
                <!-- Welcome Header -->
                <div class="mb-8">
                    <div id="welcomeSection" class="unauthenticated-only">
                        <div class="text-center py-16">
                            <div class="max-w-4xl mx-auto">
                                <h1 class="text-5xl lg:text-6xl font-bold text-gray-900 mb-6">
                                    Enterprise AI Code
                                    <span class="bg-gradient-to-r from-primary-600 to-primary-700 bg-clip-text text-transparent">
                                        Generation Platform
                                    </span>
                                </h1>
                                <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed">
                                    Transform your development workflow with intelligent code generation, 
                                    automated testing, and real-time analysis powered by enterprise-grade AI models.
                                </p>
                                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                                    <button onclick="showAuthModal('register')" class="btn-primary btn-lg">
                                        <i class="fas fa-rocket"></i>
                                        Start Building Now
                                    </button>
                                    <button onclick="showDemo()" class="btn-secondary btn-lg">
                                        <i class="fas fa-play"></i>
                                        Watch Demo
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Features Grid -->
                        <div class="grid md:grid-cols-3 gap-8 mb-16">
                            <div class="feature-card">
                                <div class="feature-icon bg-primary-100">
                                    <i class="fas fa-code text-primary-600"></i>
                                </div>
                                <h3>Intelligent Code Generation</h3>
                                <p>Generate production-ready code from natural language descriptions with advanced AI models.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon bg-green-100">
                                    <i class="fas fa-vial text-green-600"></i>
                                </div>
                                <h3>Automated Testing</h3>
                                <p>Comprehensive test suites automatically generated and executed for quality assurance.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon bg-purple-100">
                                    <i class="fas fa-chart-line text-purple-600"></i>
                                </div>
                                <h3>Real-time Analytics</h3>
                                <p>Monitor code quality, performance metrics, and development velocity in real-time.</p>
                            </div>
                        </div>
                    </div>

                    <!-- User Dashboard -->
                    <div id="userDashboard" class="authenticated-only hidden">
                        <div class="flex items-center justify-between mb-8">
                            <div>
                                <h1 class="text-3xl font-bold text-gray-900">Welcome back</h1>
                                <p class="text-gray-600 mt-1">Here's what's happening with your projects today.</p>
                            </div>
                            <button onclick="showSection('generate')" class="btn-primary">
                                <i class="fas fa-plus"></i>
                                New Generation
                            </button>
                        </div>

                        <!-- Stats Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="stat-card">
                                <div class="stat-icon bg-primary-100">
                                    <i class="fas fa-folder text-primary-600"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Total Projects</p>
                                    <p id="totalProjects" class="text-2xl font-bold text-gray-900">0</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon bg-green-100">
                                    <i class="fas fa-code text-green-600"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Code Generated</p>
                                    <p id="totalGenerations" class="text-2xl font-bold text-gray-900">0</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon bg-blue-100">
                                    <i class="fas fa-vial text-blue-600"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Tests Run</p>
                                    <p id="totalTests" class="text-2xl font-bold text-gray-900">0</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon bg-purple-100">
                                    <i class="fas fa-percentage text-purple-600"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Success Rate</p>
                                    <p id="successRate" class="text-2xl font-bold text-gray-900">0%</p>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity & Quick Actions -->
                        <div class="grid lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-2">
                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h3>Recent Activity</h3>
                                        <button class="btn-ghost btn-sm">
                                            <i class="fas fa-external-link-alt"></i>
                                            View All
                                        </button>
                                    </div>
                                    <div id="recentActivity" class="space-y-4">
                                        <div class="text-center py-8 text-gray-500">
                                            <i class="fas fa-clock text-2xl mb-2"></i>
                                            <p>Loading recent activity...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-6">
                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h3>Quick Actions</h3>
                                    </div>
                                    <div class="space-y-3">
                                        <button onclick="showSection('projects')" class="quick-action-btn">
                                            <i class="fas fa-folder-plus"></i>
                                            Create Project
                                        </button>
                                        <button onclick="showSection('generate')" class="quick-action-btn">
                                            <i class="fas fa-magic"></i>
                                            Generate Code
                                        </button>
                                        <button onclick="showSection('analyze')" class="quick-action-btn">
                                            <i class="fas fa-search"></i>
                                            Analyze Code
                                        </button>
                                    </div>
                                </div>
                                <div class="dashboard-card">
                                    <div class="card-header">
                                        <h3>System Status</h3>
                                    </div>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">API Status</span>
                                            <div class="flex items-center space-x-2">
                                                <div id="healthIndicator" class="w-2 h-2 rounded-full bg-gray-400"></div>
                                                <span id="healthText" class="text-sm font-medium">Checking...</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">AI Models</span>
                                            <span class="text-sm font-medium text-green-600">
                                                <i class="fas fa-check"></i>
                                                Online
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->        <section id="projects" class="section hidden">
            <div class="max-w-7xl mx-auto px-6 lg:px-8 py-8">
                <div class="section-header">
                    <div>
                        <h1 class="section-title">Projects</h1>
                        <p class="section-subtitle">Manage your development projects and repositories</p>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button onclick="importProject()" class="btn btn-secondary">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
                            </svg>
                            Import
                        </button>
                        <button onclick="createProject()" class="btn btn-primary">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                            Create Project
                        </button>
                    </div>
                </div>

                <!-- Enhanced Project Filters and Search -->
                <div class="projects-toolbar bg-white rounded-xl border border-gray-200 p-6 mb-8">
                    <div class="flex flex-col lg:flex-row gap-4 items-center justify-between">
                        <div class="flex flex-1 items-center space-x-4">
                            <div class="relative flex-1 max-w-md">
                                <svg class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                                <input id="projectSearch" type="text" placeholder="Search projects by name, language, or tags..." 
                                       class="form-input pl-10 pr-4 w-full">
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm font-medium text-gray-700">Sort by:</span>
                                <select id="projectSort" class="form-select-sm">
                                    <option value="updated">Last Modified</option>
                                    <option value="created">Date Created</option>
                                    <option value="name">Name</option>
                                    <option value="size">Size</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="flex items-center space-x-2">
                                <label class="text-sm font-medium text-gray-700">Status:</label>
                                <select id="projectStatusFilter" class="form-select-sm">
                                    <option value="">All Status</option>
                                    <option value="active">Active</option>
                                    <option value="completed">Completed</option>
                                    <option value="on-hold">On Hold</option>
                                    <option value="archived">Archived</option>
                                </select>
                            </div>
                            <div class="flex items-center space-x-2">
                                <label class="text-sm font-medium text-gray-700">Type:</label>
                                <select id="projectTypeFilter" class="form-select-sm">
                                    <option value="">All Types</option>
                                    <option value="web">Web App</option>
                                    <option value="mobile">Mobile App</option>
                                    <option value="desktop">Desktop App</option>
                                    <option value="library">Library</option>
                                    <option value="api">API</option>
                                    <option value="script">Script</option>
                                </select>
                            </div>
                            <div class="project-view-toggle flex rounded-lg border border-gray-300">
                                <button id="gridViewBtn" class="px-3 py-2 rounded-l-lg bg-primary-50 text-primary-600 border-r border-gray-300">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M3 3h7v7H3V3zm0 11h7v7H3v-7zm11-11h7v7h-7V3zm0 11h7v7h-7v-7z"/>
                                    </svg>
                                </button>
                                <button id="listViewBtn" class="px-3 py-2 rounded-r-lg text-gray-500 hover:text-gray-700">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M3 5h18v2H3V5zm0 6h18v2H3v-2zm0 6h18v2H3v-2z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Project Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="project-stat-card">
                        <div class="flex items-center">
                            <div class="project-stat-icon bg-primary-100">
                                <svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Total Projects</p>
                                <p id="totalProjectsCount" class="text-2xl font-bold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="project-stat-card">
                        <div class="flex items-center">
                            <div class="project-stat-icon bg-green-100">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Active Projects</p>
                                <p id="activeProjectsCount" class="text-2xl font-bold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="project-stat-card">
                        <div class="flex items-center">
                            <div class="project-stat-icon bg-blue-100">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Code Generated</p>
                                <p id="codeGeneratedCount" class="text-2xl font-bold text-gray-900">0 KB</p>
                            </div>
                        </div>
                    </div>
                    <div class="project-stat-card">
                        <div class="flex items-center">
                            <div class="project-stat-icon bg-purple-100">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">Last Activity</p>
                                <p id="lastActivityTime" class="text-2xl font-bold text-gray-900">--</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Projects Grid/List Container -->
                <div id="projectsContainer" class="projects-grid">
                    <div id="projectsList" class="project-cards-grid">
                        <!-- Empty State -->
                        <div id="projectsEmptyState" class="projects-empty-state col-span-full">
                            <div class="text-center py-16">
                                <div class="w-20 h-20 bg-gradient-to-br from-primary-100 to-primary-200 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <svg class="w-10 h-10 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                                    </svg>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-900 mb-3">No projects yet</h3>
                                <p class="text-gray-600 mb-8 max-w-md mx-auto">Create your first project to start generating code with AI. Projects help organize your development work and track progress.</p>
                                <div class="flex flex-col sm:flex-row items-center justify-center space-y-3 sm:space-y-0 sm:space-x-4">
                                    <button onclick="createProject()" class="btn btn-primary">
                                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                                        </svg>
                                        Create Your First Project
                                    </button>
                                    <button onclick="importProject()" class="btn btn-secondary">
                                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
                                        </svg>
                                        Import Existing Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Panel -->
                <div class="projects-quick-actions mt-8">
                    <div class="bg-gradient-to-r from-primary-500 to-secondary-500 rounded-xl p-6 text-white">
                        <div class="flex flex-col lg:flex-row items-center justify-between">
                            <div class="text-center lg:text-left mb-4 lg:mb-0">
                                <h3 class="text-lg font-semibold mb-2">Supercharge Your Development</h3>
                                <p class="text-primary-100">Use AI to generate, analyze, and optimize your code across all projects</p>
                            </div>
                            <div class="flex flex-wrap items-center gap-3">
                                <button onclick="showSection('generate')" class="btn bg-white text-primary-600 hover:bg-gray-50">
                                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                    </svg>
                                    Generate Code
                                </button>
                                <button onclick="showSection('analyze')" class="btn bg-white text-primary-600 hover:bg-gray-50">
                                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                    </svg>
                                    Analyze Code
                                </button>
                                <button onclick="showSection('models')" class="btn bg-white text-primary-600 hover:bg-gray-50">
                                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                    </svg>
                                    AI Models
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Generate Section -->        <section id="generate" class="section hidden">
            <div class="max-w-5xl mx-auto px-6 lg:px-8 py-8">
                <div class="section-header text-center">
                    <h1 class="section-title">AI Code Generation</h1>
                    <p class="section-subtitle">Transform your ideas into production-ready code with AI</p>
                </div>

                <!-- Generation Progress Bar -->
                <div id="generationProgress" class="hidden mb-8">
                    <div class="generate-progress-container">
                        <div class="generate-progress-bar">
                            <div class="generate-progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="generate-progress-steps">
                            <div class="generate-step active">
                                <div class="generate-step-circle">1</div>
                                <span>Analyzing</span>
                            </div>
                            <div class="generate-step">
                                <div class="generate-step-circle">2</div>
                                <span>Generating</span>
                            </div>
                            <div class="generate-step">
                                <div class="generate-step-circle">3</div>
                                <span>Optimizing</span>
                            </div>
                            <div class="generate-step">
                                <div class="generate-step-circle">4</div>
                                <span>Complete</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Generation Form -->
                <div class="generate-form-container">
                    <form id="generateForm" class="generate-form">
                        <!-- Context Selection -->
                        <div class="generate-section">
                            <h3 class="generate-section-title">Project Context</h3>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="form-label">Project (Optional)</label>
                                    <select id="projectSelect" name="project_id" class="form-select">
                                        <option value="">Select a project...</option>
                                    </select>
                                    <p class="form-help">Choose a project to maintain context and coding standards</p>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Programming Language</label>
                                    <select id="language" name="language" class="form-select">
                                        <option value="python">Python</option>
                                        <option value="javascript">JavaScript</option>
                                        <option value="typescript">TypeScript</option>
                                        <option value="java">Java</option>
                                        <option value="csharp">C#</option>
                                        <option value="cpp">C++</option>
                                        <option value="go">Go</option>
                                        <option value="rust">Rust</option>
                                        <option value="php">PHP</option>
                                        <option value="ruby">Ruby</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Code Description -->
                        <div class="generate-section">
                            <h3 class="generate-section-title">Code Requirements</h3>
                            <div class="form-group">
                                <label class="form-label required">
                                    Code Description
                                    <span class="form-label-badge">Primary</span>
                                </label>
                                <div class="generate-textarea-container">
                                    <textarea id="prompt" name="prompt" rows="8" 
                                              placeholder="Describe the code you want to generate. Be specific about:&#10;• Functionality and purpose&#10;• Input parameters and types&#10;• Expected output or return values&#10;• Error handling requirements&#10;• Performance considerations&#10;• Any specific patterns or libraries to use"
                                              class="form-textarea generate-textarea" required></textarea>
                                    <div class="generate-textarea-footer">
                                        <div class="generate-textarea-tips">
                                            <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                            <span class="text-sm text-blue-600">Pro tip: Include examples and edge cases for better results</span>
                                        </div>
                                        <div class="generate-char-counter">
                                            <span id="charCount" class="text-sm text-gray-500">0</span>
                                            <span class="text-sm text-gray-400">/2000</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Templates -->
                            <div class="generate-templates">
                                <label class="form-label-sm">Quick Templates</label>
                                <div class="generate-template-grid">
                                    <button type="button" class="generate-template-btn" data-template="api">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                        </svg>
                                        <span>REST API</span>
                                    </button>
                                    <button type="button" class="generate-template-btn" data-template="crud">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
                                        </svg>
                                        <span>CRUD Operations</span>
                                    </button>
                                    <button type="button" class="generate-template-btn" data-template="auth">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                                        </svg>
                                        <span>Authentication</span>
                                    </button>
                                    <button type="button" class="generate-template-btn" data-template="algorithm">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                        </svg>
                                        <span>Algorithm</span>
                                    </button>
                                    <button type="button" class="generate-template-btn" data-template="ui">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                                        </svg>
                                        <span>UI Component</span>
                                    </button>
                                    <button type="button" class="generate-template-btn" data-template="utility">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        </svg>
                                        <span>Utility Function</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Configuration -->
                        <div class="generate-section">
                            <div class="generate-section-toggle">
                                <button type="button" onclick="toggleAdvancedOptions()" class="generate-toggle-btn">
                                    <svg id="advancedToggleIcon" class="w-5 h-5 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                    <span id="advancedToggleText">Advanced Configuration</span>
                                    <span class="generate-toggle-badge">Optional</span>
                                </button>
                            </div>

                            <div id="advancedOptions" class="generate-advanced-options hidden">
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div class="form-group">
                                        <label class="form-label">AI Model</label>
                                        <select id="modelSelectGenerate" name="model" class="form-select">
                                            <option value="">Auto-select Best Model</option>
                                        </select>
                                        <p class="form-help">Choose specific model or let AI select the best one</p>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Code Style</label>
                                        <select name="style" class="form-select">
                                            <option value="clean">Clean & Readable</option>
                                            <option value="performant">Performance Optimized</option>
                                            <option value="minimal">Minimal</option>
                                            <option value="enterprise">Enterprise Pattern</option>
                                            <option value="functional">Functional Programming</option>
                                            <option value="oop">Object-Oriented</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="generate-options-grid">
                                    <label class="generate-option-card">
                                        <input type="checkbox" name="include_tests" class="form-checkbox">
                                        <div class="generate-option-content">
                                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                            <div>
                                                <span class="font-medium">Unit Tests</span>
                                                <p class="text-sm text-gray-600">Generate comprehensive test cases</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="generate-option-card">
                                        <input type="checkbox" name="include_comments" class="form-checkbox" checked>
                                        <div class="generate-option-content">
                                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                                            </svg>
                                            <div>
                                                <span class="font-medium">Comments</span>
                                                <p class="text-sm text-gray-600">Include inline documentation</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="generate-option-card">
                                        <input type="checkbox" name="include_docs" class="form-checkbox">
                                        <div class="generate-option-content">
                                            <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                            <div>
                                                <span class="font-medium">Documentation</span>
                                                <p class="text-sm text-gray-600">Generate API docs and README</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="generate-option-card">
                                        <input type="checkbox" name="include_error_handling" class="form-checkbox" checked>
                                        <div class="generate-option-content">
                                            <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.944-.833-2.714 0L3.1 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                                            </svg>
                                            <div>
                                                <span class="font-medium">Error Handling</span>
                                                <p class="text-sm text-gray-600">Include robust error handling</p>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <div class="generate-submit-section">
                            <button type="submit" class="btn btn-primary btn-xl generate-btn">
                                <div class="generate-btn-content">
                                    <svg id="generateIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                    </svg>
                                    <svg id="generateSpinner" class="w-6 h-6 animate-spin hidden" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    <span id="generateButtonText">Generate Code with AI</span>
                                </div>
                                <div class="generate-btn-subtext">
                                    <span class="text-sm opacity-90">Powered by advanced AI models</span>
                                </div>
                            </button>
                            <p class="text-center text-sm text-gray-600 mt-4">
                                Generation typically takes 10-30 seconds depending on complexity
                            </p>
                        </div>
                    </form>
                </div>

                <!-- Generation Result -->
                <div id="generationResult" class="hidden">
                    <div class="generate-result-container">
                        <div class="generate-result-header">
                            <div class="flex items-center">
                                <div class="generate-result-icon">
                                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">Code Generated Successfully</h3>
                                    <p class="text-sm text-gray-600">Review and save your generated code</p>
                                </div>
                            </div>
                            <div class="generate-result-actions">
                                <button onclick="copyCode()" class="btn btn-ghost btn-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                    </svg>
                                    Copy
                                </button>
                                <button onclick="downloadCode()" class="btn btn-ghost btn-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                    Download
                                </button>
                                <button onclick="testGenerated()" class="btn btn-secondary btn-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    Test Code
                                </button>
                                <button onclick="saveToProject()" class="btn btn-primary btn-sm">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
                                    </svg>
                                    Save to Project
                                </button>
                            </div>
                        </div>
                        <div class="generate-result-content">
                            <div class="code-block-container">
                                <div class="code-block-header">
                                    <div class="code-block-tabs">
                                        <button class="code-tab active" data-tab="code">Generated Code</button>
                                        <button class="code-tab" data-tab="tests">Tests</button>
                                        <button class="code-tab" data-tab="docs">Documentation</button>
                                    </div>
                                    <div class="code-block-info">
                                        <span class="code-language-badge">Python</span>
                                        <span class="code-size-badge">245 lines</span>
                                    </div>
                                </div>
                                <pre id="generatedCode" class="code-block"></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>        <!-- Analyze Section -->
        <section id="analyze" class="section hidden">
            <div class="max-w-6xl mx-auto px-6 lg:px-8 py-8">
                <div class="section-header text-center">
                    <h1 class="section-title">Code Analysis</h1>
                    <p class="section-subtitle">Analyze code quality, performance, security, and get improvement suggestions</p>
                </div>

                <!-- Analysis Dashboard -->
                <div class="analyze-dashboard mb-8">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="analyze-stat-card">
                            <div class="analyze-stat-icon bg-blue-100">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-600">Files Analyzed</p>
                                <p id="filesAnalyzedCount" class="text-2xl font-bold text-gray-900">0</p>
                            </div>
                        </div>
                        <div class="analyze-stat-card">
                            <div class="analyze-stat-icon bg-green-100">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-600">Quality Score</p>
                                <p id="qualityScore" class="text-2xl font-bold text-gray-900">--</p>
                            </div>
                        </div>
                        <div class="analyze-stat-card">
                            <div class="analyze-stat-icon bg-yellow-100">
                                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.944-.833-2.714 0L3.1 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-600">Issues Found</p>
                                <p id="issuesCount" class="text-2xl font-bold text-gray-900">0</p>
                            </div>
                        </div>
                        <div class="analyze-stat-card">
                            <div class="analyze-stat-icon bg-purple-100">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-600">Suggestions</p>
                                <p id="suggestionsCount" class="text-2xl font-bold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analysis Input Methods -->
                <div class="analyze-input-container">
                    <div class="analyze-input-tabs">
                        <button class="analyze-tab active" data-tab="code">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                            </svg>
                            Paste Code
                        </button>
                        <button class="analyze-tab" data-tab="file">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Upload File
                        </button>
                        <button class="analyze-tab" data-tab="project">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                            </svg>
                            From Project
                        </button>
                    </div>

                    <!-- Code Input Tab -->
                    <div id="codeTab" class="analyze-tab-content active">
                        <form id="analyzeForm" class="analyze-form">
                            <div class="analyze-section">
                                <div class="form-group">
                                    <label class="form-label required">
                                        Code to Analyze
                                        <span class="form-label-badge">Primary</span>
                                    </label>
                                    <div class="analyze-textarea-container">
                                        <textarea id="analyzeCode" name="code" rows="16" 
                                                  placeholder="Paste your code here for comprehensive analysis...&#10;&#10;• Supports all major programming languages&#10;• Automatic language detection&#10;• Real-time syntax validation&#10;• Secure analysis (code not stored)"
                                                  class="form-textarea analyze-textarea font-mono" required></textarea>
                                        <div class="analyze-textarea-footer">
                                            <div class="analyze-language-detection">
                                                <span class="text-sm text-gray-600">Detected language:</span>
                                                <span id="detectedLanguage" class="analyze-language-badge">Auto-detecting...</span>
                                            </div>
                                            <div class="analyze-char-counter">
                                                <span id="analyzeCharCount" class="text-sm text-gray-500">0</span>
                                                <span class="text-sm text-gray-400">/50000</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid md:grid-cols-2 gap-6">
                                    <div class="form-group">
                                        <label class="form-label">Language Override</label>
                                        <select id="analyzeLanguage" name="language" class="form-select">
                                            <option value="">Auto-detect</option>
                                            <option value="python">Python</option>
                                            <option value="javascript">JavaScript</option>
                                            <option value="typescript">TypeScript</option>
                                            <option value="java">Java</option>
                                            <option value="csharp">C#</option>
                                            <option value="cpp">C++</option>
                                            <option value="go">Go</option>
                                            <option value="rust">Rust</option>
                                            <option value="php">PHP</option>
                                            <option value="ruby">Ruby</option>
                                            <option value="swift">Swift</option>
                                            <option value="kotlin">Kotlin</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Analysis Depth</label>
                                        <select name="depth" class="form-select">
                                            <option value="standard">Standard Analysis</option>
                                            <option value="deep">Deep Analysis</option>
                                            <option value="comprehensive">Comprehensive Review</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="analyze-section">
                                <h3 class="analyze-section-title">Analysis Categories</h3>
                                <div class="analyze-categories-grid">
                                    <label class="analyze-category-card">
                                        <input type="checkbox" name="quality" class="form-checkbox" checked>
                                        <div class="analyze-category-content">
                                            <div class="analyze-category-icon bg-blue-100">
                                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                            </div>
                                            <div>
                                                <span class="font-semibold">Code Quality</span>
                                                <p class="text-sm text-gray-600">Readability, maintainability, best practices</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="analyze-category-card">
                                        <input type="checkbox" name="security" class="form-checkbox" checked>
                                        <div class="analyze-category-content">
                                            <div class="analyze-category-icon bg-red-100">
                                                <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                                                </svg>
                                            </div>
                                            <div>
                                                <span class="font-semibold">Security Analysis</span>
                                                <p class="text-sm text-gray-600">Vulnerabilities, security patterns</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="analyze-category-card">
                                        <input type="checkbox" name="performance" class="form-checkbox" checked>
                                        <div class="analyze-category-content">
                                            <div class="analyze-category-icon bg-green-100">
                                                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                                </svg>
                                            </div>
                                            <div>
                                                <span class="font-semibold">Performance</span>
                                                <p class="text-sm text-gray-600">Optimization opportunities, bottlenecks</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="analyze-category-card">
                                        <input type="checkbox" name="complexity" class="form-checkbox" checked>
                                        <div class="analyze-category-content">
                                            <div class="analyze-category-icon bg-purple-100">
                                                <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                                </svg>
                                            </div>
                                            <div>
                                                <span class="font-semibold">Complexity</span>
                                                <p class="text-sm text-gray-600">Cyclomatic complexity, refactoring</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="analyze-category-card">
                                        <input type="checkbox" name="documentation" class="form-checkbox">
                                        <div class="analyze-category-content">
                                            <div class="analyze-category-icon bg-yellow-100">
                                                <svg class="w-5 h-5 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                                </svg>
                                            </div>
                                            <div>
                                                <span class="font-semibold">Documentation</span>
                                                <p class="text-sm text-gray-600">Comments, docstrings, clarity</p>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="analyze-category-card">
                                        <input type="checkbox" name="suggestions" class="form-checkbox" checked>
                                        <div class="analyze-category-content">
                                            <div class="analyze-category-icon bg-indigo-100">
                                                <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                                </svg>
                                            </div>
                                            <div>
                                                <span class="font-semibold">AI Suggestions</span>
                                                <p class="text-sm text-gray-600">Improvement recommendations</p>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Analyze Button -->
                            <div class="analyze-submit-section">
                                <button type="submit" class="btn btn-primary btn-xl">
                                    <div class="flex items-center justify-center">
                                        <svg id="analyzeIcon" class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                        </svg>
                                        <svg id="analyzeSpinner" class="w-6 h-6 mr-3 animate-spin hidden" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        <span id="analyzeButtonText">Analyze Code with AI</span>
                                    </div>
                                </button>
                                <p class="text-center text-sm text-gray-600 mt-4">
                                    Analysis typically takes 15-45 seconds depending on code size and complexity
                                </p>
                            </div>
                        </form>
                    </div>

                    <!-- File Upload Tab -->
                    <div id="fileTab" class="analyze-tab-content hidden">
                        <div class="analyze-upload-area">
                            <div class="analyze-upload-zone" id="analyzeUploadZone">
                                <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <p class="text-lg font-medium text-gray-700 mb-2">Drop files to analyze</p>
                                <p class="text-gray-500 mb-4">or click to browse</p>
                                <input type="file" id="analyzeFileInput" multiple accept=".py,.js,.ts,.java,.cs,.cpp,.go,.rs,.php,.rb,.swift,.kt" class="hidden">
                                <button type="button" onclick="document.getElementById('analyzeFileInput').click()" class="btn btn-secondary">
                                    Choose Files
                                </button>
                                <p class="text-xs text-gray-500 mt-4">Supports: Python, JavaScript, TypeScript, Java, C#, C++, Go, Rust, PHP, Ruby, Swift, Kotlin</p>
                            </div>
                        </div>
                    </div>

                    <!-- Project Tab -->
                    <div id="projectTab" class="analyze-tab-content hidden">
                        <div class="analyze-project-selection">
                            <div class="form-group">
                                <label class="form-label">Select Project</label>
                                <select id="analyzeProjectSelect" class="form-select">
                                    <option value="">Choose a project to analyze...</option>
                                </select>
                            </div>
                            <div class="analyze-project-files" id="analyzeProjectFiles">
                                <!-- Project files will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analysis Results -->
                <div id="analysisResults" class="hidden analyze-results-container">
                    <!-- Results will be populated here -->
                </div>
            </div>
        </section>        <!-- Models Section -->
        <section id="models" class="section hidden">
            <div class="max-w-7xl mx-auto px-6 lg:px-8 py-8">
                <!-- Section Header with Toolbar -->
                <div class="section-header mb-8">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                        <div class="flex-1">
                            <h1 class="section-title">AI Models Management</h1>
                            <p class="section-subtitle">Monitor, configure, and optimize AI models for enterprise-grade code generation</p>
                        </div>
                        
                        <!-- Models Toolbar -->
                        <div class="flex items-center space-x-3 mt-4 lg:mt-0">
                            <div class="relative">
                                <select id="modelFilter" class="form-select pr-8">
                                    <option value="all">All Models</option>
                                    <option value="online">Online Only</option>
                                    <option value="offline">Offline Only</option>
                                    <option value="gpt">GPT Models</option>
                                    <option value="claude">Claude Models</option>
                                    <option value="codellama">Code Llama</option>
                                </select>
                                <i class="fas fa-filter absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                            </div>
                            
                            <div class="flex bg-gray-100 rounded-lg p-1">
                                <button id="modelsGridView" class="view-toggle active" data-view="grid">
                                    <i class="fas fa-th-large"></i>
                                </button>
                                <button id="modelsListView" class="view-toggle" data-view="list">
                                    <i class="fas fa-list"></i>
                                </button>
                            </div>
                            
                            <button onclick="refreshModels()" class="btn-primary">
                                <i class="fas fa-sync-alt"></i>
                                Refresh Status
                            </button>
                            
                            <button onclick="showModelConfiguration()" class="btn-secondary">
                                <i class="fas fa-cog"></i>
                                Configure
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Model Metrics Dashboard -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-icon bg-gradient-to-br from-green-400 to-green-600">
                                <i class="fas fa-check-circle text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="metric-label">Models Online</p>
                                <p id="modelsOnline" class="metric-value text-green-600">0</p>
                            </div>
                        </div>
                        <div class="metric-trend">
                            <span class="text-green-600 text-sm font-medium">
                                <i class="fas fa-arrow-up"></i> 100%
                            </span>
                            <span class="text-gray-500 text-sm">availability</span>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-icon bg-gradient-to-br from-blue-400 to-blue-600">
                                <i class="fas fa-brain text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="metric-label">Total Models</p>
                                <p id="totalModels" class="metric-value text-blue-600">0</p>
                            </div>
                        </div>
                        <div class="metric-trend">
                            <span class="text-blue-600 text-sm font-medium">
                                <i class="fas fa-plus"></i> 3
                            </span>
                            <span class="text-gray-500 text-sm">providers</span>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-icon bg-gradient-to-br from-purple-400 to-purple-600">
                                <i class="fas fa-tachometer-alt text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="metric-label">Avg Response</p>
                                <p id="avgResponseTime" class="metric-value text-purple-600">0ms</p>
                            </div>
                        </div>
                        <div class="metric-trend">
                            <span class="text-green-600 text-sm font-medium">
                                <i class="fas fa-arrow-down"></i> 12%
                            </span>
                            <span class="text-gray-500 text-sm">faster</span>
                        </div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-header">
                            <div class="metric-icon bg-gradient-to-br from-orange-400 to-orange-600">
                                <i class="fas fa-chart-line text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="metric-label">Usage Today</p>
                                <p class="metric-value text-orange-600">1,247</p>
                            </div>
                        </div>
                        <div class="metric-trend">
                            <span class="text-green-600 text-sm font-medium">
                                <i class="fas fa-arrow-up"></i> 8%
                            </span>
                            <span class="text-gray-500 text-sm">vs yesterday</span>
                        </div>
                    </div>
                </div>

                <!-- Model Performance Chart -->
                <div class="card mb-8">
                    <div class="card-header">
                        <h3 class="card-title">Performance Monitoring</h3>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">Last 24 hours</span>
                            <button class="btn-sm btn-outline">
                                <i class="fas fa-download"></i>
                                Export
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="h-64 flex items-center justify-center bg-gray-50 rounded-lg">
                            <div class="text-center">
                                <i class="fas fa-chart-area text-gray-400 text-3xl mb-3"></i>
                                <p class="text-gray-600">Performance chart will be displayed here</p>
                                <p class="text-sm text-gray-500">Real-time monitoring coming soon</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Models Grid/List Container -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Available Models</h3>
                        <div class="flex items-center space-x-2">
                            <span id="modelsCount" class="text-sm text-gray-500">Loading...</span>
                            <button onclick="addCustomModel()" class="btn-sm btn-primary">
                                <i class="fas fa-plus"></i>
                                Add Model
                            </button>
                        </div>
                    </div>
                    
                    <div class="card-body">
                        <!-- Models Content (Grid/List View) -->
                        <div id="modelsList" class="models-container grid-view">
                            <!-- Loading State -->
                            <div id="modelsLoading" class="col-span-full text-center py-16">
                                <div class="inline-flex items-center space-x-3">
                                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div>
                                    <span class="text-lg font-medium text-gray-900">Loading AI models...</span>
                                </div>
                                <p class="text-gray-600 mt-2">Checking availability and status</p>
                            </div>
                            
                            <!-- Empty State -->
                            <div id="modelsEmpty" class="hidden col-span-full text-center py-16">
                                <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fas fa-brain text-gray-400 text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-900 mb-2">No Models Available</h3>
                                <p class="text-gray-600 mb-6 max-w-md mx-auto">
                                    No AI models are currently configured or available. Add a custom model or check your configuration.
                                </p>
                                <div class="flex justify-center space-x-3">
                                    <button onclick="refreshModels()" class="btn-primary">
                                        <i class="fas fa-sync-alt"></i>
                                        Retry
                                    </button>
                                    <button onclick="addCustomModel()" class="btn-secondary">
                                        <i class="fas fa-plus"></i>
                                        Add Model
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>    <!-- Enhanced Authentication Modal -->
    <div id="authModal" class="modal-overlay auth-modal-enhanced hidden">
        <div class="auth-modal-content-enhanced">
            <!-- Modal Header -->
            <div class="auth-modal-header">
                <div class="auth-modal-logo">
                    <i class="fas fa-code"></i>
                </div>
                <h2 id="authModalTitle" class="auth-modal-title">Welcome to Aoede</h2>
                <p id="authModalSubtitle" class="auth-modal-subtitle">Sign in to your account to continue</p>
            </div>

            <!-- Login Form -->
            <form id="loginForm" class="auth-form-enhanced">
                <div class="auth-form-group">
                    <label class="auth-form-label" for="loginEmail">Email or Username</label>
                    <input 
                        id="loginEmail"
                        name="username_or_email" 
                        type="text" 
                        class="auth-form-input" 
                        placeholder="Enter your email or username"
                        required
                        autocomplete="username"
                    >
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label" for="loginPassword">Password</label>
                    <input 
                        id="loginPassword"
                        name="password" 
                        type="password" 
                        class="auth-form-input" 
                        placeholder="Enter your password"
                        required
                        autocomplete="current-password"
                    >
                </div>
                
                <div class="flex items-center justify-between mb-6">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" class="auth-form-checkbox" name="remember_me">
                        <span class="text-sm text-gray-600">Remember me</span>
                    </label>
                    <button type="button" class="text-sm text-primary-600 hover:text-primary-700 font-medium">
                        Forgot password?
                    </button>
                </div>
                
                <button type="submit" class="auth-submit-btn">
                    <span id="loginButtonText">Sign In</span>
                    <i id="loginSpinner" class="fas fa-spinner animate-spin hidden ml-2"></i>
                </button>
                
                <!-- Social Authentication -->
                <div class="auth-divider">
                    <span>or continue with</span>
                </div>
                
                <div class="social-auth-grid">
                    <a href="/auth/github" class="social-auth-button">
                        <i class="fab fa-github"></i>
                        GitHub
                    </a>
                    <a href="/auth/google" class="social-auth-button">
                        <i class="fab fa-google"></i>
                        Google
                    </a>
                </div>
            </form>

            <!-- Register Form -->
            <form id="registerForm" class="auth-form-enhanced hidden">
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="auth-form-group">
                        <label class="auth-form-label" for="registerFirstName">First Name</label>
                        <input 
                            id="registerFirstName"
                            name="first_name" 
                            type="text" 
                            class="auth-form-input" 
                            placeholder="John"
                            required
                            autocomplete="given-name"
                        >
                    </div>
                    <div class="auth-form-group">
                        <label class="auth-form-label" for="registerLastName">Last Name</label>
                        <input 
                            id="registerLastName"
                            name="last_name" 
                            type="text" 
                            class="auth-form-input" 
                            placeholder="Doe"
                            required
                            autocomplete="family-name"
                        >
                    </div>
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label" for="registerUsername">Username</label>
                    <input 
                        id="registerUsername"
                        name="username" 
                        type="text" 
                        class="auth-form-input" 
                        placeholder="johndoe"
                        required
                        autocomplete="username"
                    >
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label" for="registerEmail">Email Address</label>
                    <input 
                        id="registerEmail"
                        name="email" 
                        type="email" 
                        class="auth-form-input" 
                        placeholder="john@example.com"
                        required
                        autocomplete="email"
                    >
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label" for="registerPassword">Password</label>
                    <input 
                        id="registerPassword"
                        name="password" 
                        type="password" 
                        class="auth-form-input" 
                        placeholder="Create a strong password"
                        required
                        autocomplete="new-password"
                    >
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label" for="registerConfirmPassword">Confirm Password</label>
                    <input 
                        id="registerConfirmPassword"
                        name="confirm_password" 
                        type="password" 
                        class="auth-form-input" 
                        placeholder="Confirm your password"
                        required
                        autocomplete="new-password"
                    >
                </div>
                
                <div class="flex items-start space-x-2 mb-6">
                    <input type="checkbox" class="auth-form-checkbox mt-1" name="accept_terms" required>
                    <span class="text-sm text-gray-600">
                        I agree to the 
                        <a href="/terms" class="text-primary-600 hover:text-primary-700 font-medium">Terms of Service</a>
                        and 
                        <a href="/privacy" class="text-primary-600 hover:text-primary-700 font-medium">Privacy Policy</a>
                    </span>
                </div>
                
                <button type="submit" class="auth-submit-btn">
                    <span id="registerButtonText">Create Account</span>
                    <i id="registerSpinner" class="fas fa-spinner animate-spin hidden ml-2"></i>
                </button>
                
                <!-- Social Authentication -->
                <div class="auth-divider">
                    <span>or sign up with</span>
                </div>
                
                <div class="social-auth-grid">
                    <a href="/auth/github" class="social-auth-button">
                        <i class="fab fa-github"></i>
                        GitHub
                    </a>
                    <a href="/auth/google" class="social-auth-button">
                        <i class="fab fa-google"></i>
                        Google
                    </a>
                </div>
            </form>

            <!-- Toggle between forms -->
            <div class="auth-toggle-section">
                <p id="authToggleText" class="auth-toggle-text">Don't have an account?</p>
                <button id="authToggleButton" class="auth-toggle-button">Sign up</button>
            </div>

            <!-- Close button -->
            <button onclick="closeAuthModal()" class="absolute top-4 right-4 text-white hover:text-gray-200 transition-colors">
                <i class="fas fa-times text-lg"></i>
            </button>
        </div>
    </div>

    <!-- New Project Modal -->
    <div id="newProjectModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="card-header">
                <h3 class="text-lg font-semibold text-gray-900">Create New Project</h3>
                <p class="text-sm text-gray-600 mt-1">Start a new development project</p>
            </div>
            
            <form id="newProjectForm" class="card-body">
                <div class="form-group">
                    <label for="projectName" class="form-label">Project Name</label>
                    <input 
                        type="text" 
                        id="projectName" 
                        name="name" 
                        class="form-input" 
                        placeholder="Enter project name"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="projectDescription" class="form-label">Description (Optional)</label>
                    <textarea 
                        id="projectDescription" 
                        name="description" 
                        class="form-input form-textarea" 
                        placeholder="Describe your project..."
                        rows="3"
                    ></textarea>
                </div>
                
                <div class="card-footer flex justify-end space-x-3">
                    <button type="button" onclick="window.ui.closeModal('newProjectModal')" class="btn btn-secondary">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary auth-submit-btn" data-original-text="Create Project">
                        <i class="fas fa-plus mr-2"></i>Create Project
                    </button>
                </div>
            </form>
            
            <!-- Close button -->
            <button onclick="window.ui.closeModal('newProjectModal')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Edit Project Modal -->
    <div id="editProjectModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="card-header">
                <h3 class="text-lg font-semibold text-gray-900">Edit Project</h3>
                <p class="text-sm text-gray-600 mt-1">Update project details</p>
            </div>
            
            <form id="editProjectForm" class="card-body">
                <input type="hidden" id="editProjectId" name="id">
                
                <div class="form-group">
                    <label for="editProjectName" class="form-label">Project Name</label>
                    <input 
                        type="text" 
                        id="editProjectName" 
                        name="name" 
                        class="form-input" 
                        placeholder="Enter project name"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="editProjectDescription" class="form-label">Description</label>
                    <textarea 
                        id="editProjectDescription" 
                        name="description" 
                        class="form-input form-textarea" 
                        placeholder="Describe your project..."
                        rows="3"
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="editProjectStatus" class="form-label">Status</label>
                    <select id="editProjectStatus" name="status" class="form-input form-select">
                        <option value="active">Active</option>
                        <option value="completed">Completed</option>
                        <option value="on_hold">On Hold</option>
                        <option value="archived">Archived</option>
                    </select>
                </div>
                
                <div class="card-footer flex justify-end space-x-3">
                    <button type="button" onclick="window.ui.closeModal('editProjectModal')" class="btn btn-secondary">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary auth-submit-btn" data-original-text="Update Project">
                        <i class="fas fa-save mr-2"></i>Update Project
                    </button>
                </div>
            </form>
            
            <!-- Close button -->
            <button onclick="window.ui.closeModal('editProjectModal')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Generation Modal -->
    <div id="generationModal" class="modal-overlay hidden">
        <div class="modal-content max-w-4xl">
            <div class="card-header">
                <h3 class="text-lg font-semibold text-gray-900">Generated Code</h3>
                <p class="text-sm text-gray-600 mt-1">Review and use your generated code</p>
            </div>
            
            <div class="card-body">
                <div class="mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-gray-700">Generated Code:</span>
                        <button id="copyCodeBtn" class="btn btn-ghost btn-sm">
                            <i class="fas fa-copy mr-1"></i>Copy
                        </button>
                    </div>
                    <div class="code-editor">
                        <div class="code-editor-header">
                            <div class="code-editor-controls">
                                <div class="code-editor-dot red"></div>
                                <div class="code-editor-dot yellow"></div>
                                <div class="code-editor-dot green"></div>
                            </div>
                            <span id="generationLanguage" class="text-xs text-gray-400"></span>
                        </div>
                        <pre id="generatedCode" class="code-editor-content"><code></code></pre>
                    </div>
                </div>
                
                <div id="generationMetadata" class="grid grid-cols-2 gap-4 mb-4">
                    <!-- Metadata will be populated dynamically -->
                </div>
                
                <div class="card-footer flex justify-between">
                    <div class="flex items-center space-x-2">
                        <button id="downloadCodeBtn" class="btn btn-outline">
                            <i class="fas fa-download mr-2"></i>Download
                        </button>
                        <button id="validateCodeBtn" class="btn btn-outline">
                            <i class="fas fa-check-circle mr-2"></i>Validate
                        </button>
                    </div>
                    <button onclick="window.ui.closeModal('generationModal')" class="btn btn-secondary">
                        Close
                    </button>
                </div>
            </div>
            
            <!-- Close button -->
            <button onclick="window.ui.closeModal('generationModal')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div id="keyboardShortcutsModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="card-header">
                <h3 class="text-lg font-semibold text-gray-900">Keyboard Shortcuts</h3>
                <p class="text-sm text-gray-600 mt-1">Speed up your workflow with these shortcuts</p>
            </div>
            
            <div class="modal-body">
                <div class="space-y-4">
                    <div class="grid grid-cols-1 gap-3">
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-sm text-gray-700">Search</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Ctrl + K</kbd>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-sm text-gray-700">New Project</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Ctrl + N</kbd>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-sm text-gray-700">Code Generation</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Ctrl + G</kbd>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-sm text-gray-700">Projects</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Ctrl + P</kbd>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-sm text-gray-700">Dashboard</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Ctrl + D</kbd>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-sm text-gray-700">AI Models</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Ctrl + M</kbd>
                        </div>
                        <div class="flex justify-between items-center py-2 border-b border-gray-100">
                            <span class="text-sm text-gray-700">Close Modal</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Escape</kbd>
                        </div>
                        <div class="flex justify-between items-center py-2">
                            <span class="text-sm text-gray-700">Show Shortcuts</span>
                            <kbd class="px-2 py-1 text-xs bg-gray-100 border border-gray-300 rounded">Ctrl + /</kbd>
                        </div>
                    </div>
                </div>
                
                <div class="card-footer">
                    <button onclick="window.ui.closeModal('keyboardShortcutsModal')" class="btn btn-primary w-full">
                        Got it!
                    </button>
                </div>
            </div>
            
            <!-- Close button -->
            <button onclick="window.ui.closeModal('keyboardShortcutsModal')" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>    <!-- JavaScript -->
    <script src="/static/js/api.js"></script>
    <script src="/static/js/ui.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/app.js"></script>
    
    <script>
        // Enhanced global utility functions for onclick handlers
        function showSection(section) {
            // Hide all sections immediately
            const sections = document.querySelectorAll('.section');
            sections.forEach(function(sec) {
                sec.classList.add('hidden');
                sec.classList.remove('active');
            });
            
            // Show target section immediately
            const targetSection = document.getElementById(section);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                targetSection.classList.add('active');
                
                // Update navigation state
                updateNavigation(section);
                
                // Try using UI manager if available
                if (window.ui && typeof window.ui.navigateToView === 'function') {
                    window.ui.currentView = section;
                }
            }
        }
          function updateNavigation(activeSection) {
            // Update desktop navigation
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(function(link) {
                const linkSection = link.getAttribute('data-section');
                if (linkSection === activeSection) {
                    link.classList.add('active');
                    link.classList.add('nav-active');
                } else {
                    link.classList.remove('active');
                    link.classList.remove('nav-active');
                }
            });
            
            // Update mobile navigation
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            mobileNavLinks.forEach(function(link) {
                const linkSection = link.getAttribute('data-section');
                if (linkSection === activeSection) {
                    link.classList.add('active');
                    link.classList.add('nav-active');
                } else {
                    link.classList.remove('active');
                    link.classList.remove('nav-active');
                }
            });
        }        function showAuthModal(mode = 'login') {
            // Find and show modal immediately
            const modal = document.getElementById('authModal');
            if (modal) {
                // Force remove hidden class and set display
                modal.classList.remove('hidden');
                modal.style.display = 'flex';
                modal.style.position = 'fixed';
                modal.style.inset = '0';
                modal.style.zIndex = '1000';
                modal.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
                modal.style.alignItems = 'center';
                modal.style.justifyContent = 'center';
                modal.style.padding = '1rem';
                
                document.body.style.overflow = 'hidden';
                
                // Set the mode for the auth modal
                const loginForm = document.getElementById('loginForm');
                const registerForm = document.getElementById('registerForm');
                const modalTitle = document.getElementById('authModalTitle');
                const modalSubtitle = document.getElementById('authModalSubtitle');
                
                if (loginForm && registerForm) {
                    if (mode === 'register') {
                        loginForm.style.display = 'none';
                        registerForm.style.display = 'block';
                        if (modalTitle) modalTitle.textContent = 'Join Aoede';
                        if (modalSubtitle) modalSubtitle.textContent = 'Create your account';
                    } else {
                        loginForm.style.display = 'block';
                        registerForm.style.display = 'none';
                        if (modalTitle) modalTitle.textContent = 'Welcome Back';
                        if (modalSubtitle) modalSubtitle.textContent = 'Sign in to your account';
                    }
                }
                
                // Try using UI manager if available
                if (window.ui && typeof window.ui.openModal === 'function') {
                    window.ui.openModal('authModal');
                }
            }
        }        function closeAuthModal() {
            // Hide modal immediately
            const modal = document.getElementById('authModal');
            if (modal) {
                modal.classList.add('hidden');
                modal.style.display = 'none';
                document.body.style.overflow = '';
                
                // Try using UI manager if available
                if (window.ui && typeof window.ui.closeModal === 'function') {
                    window.ui.closeModal('authModal');
                }
            }
        }        function toggleUserMenu() {
            const dropdown = document.getElementById('userMenuDropdown');
            if (dropdown) {
                dropdown.classList.toggle('hidden');
            }
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenu) {
                mobileMenu.classList.toggle('hidden');
            }
        }        function showUserProfile() {
            showSection('settings');
        }

        function showUserSettings() {
            showSection('settings');
        }

        function showBilling() {
            showSection('settings');
        }        function logout() {
            if (window.auth && typeof window.auth.logout === 'function') {
                window.auth.logout();
            } else {
                // Fallback logout logic
                document.cookie = 'session_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                window.location.reload();
            }
        }

        function showDemo() {
            if (window.ui && typeof window.ui.showToast === 'function') {
                window.ui.showToast('Demo feature coming soon!', 'info');
            } else {
                alert('Demo feature coming soon!');
            }
        }        function dismissAlert(alertId) {
            const alert = document.getElementById(alertId);
            const main = document.querySelector('main');
            
            if (alert) {
                alert.classList.add('alert-hidden');
                if (main) {
                    main.classList.add('alert-dismissed');
                }
                
                // Remove from DOM after animation
                setTimeout(function() {
                    if (alert.parentNode) {
                        alert.parentNode.removeChild(alert);
                    }
                }, 300);
            }
        }        // Auth form toggle functions
        function toggleAuthForm() {
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            
            if (loginForm && registerForm) {
                if (loginForm.style.display === 'none') {
                    loginForm.style.display = 'block';
                    registerForm.style.display = 'none';
                } else {
                    loginForm.style.display = 'none';
                    registerForm.style.display = 'block';
                }
                updateAuthToggleText();
            }
        }

        function updateAuthToggleText() {
            const authToggleText = document.getElementById('authToggleText');
            const authToggleButton = document.getElementById('authToggleButton');
            const loginForm = document.getElementById('loginForm');
            
            if (authToggleText && authToggleButton && loginForm) {
                if (loginForm.style.display !== 'none') {
                    authToggleText.textContent = "Don't have an account?";
                    authToggleButton.textContent = "Sign up";                } else {
                    authToggleText.textContent = "Already have an account?";
                    authToggleButton.textContent = "Sign in";
                }
            }
        }
        
        // Comprehensive DOM ready initialization
        let appInitialized = false;
        
        function initializeApp() {
            if (appInitialized) {
                return;
            }
            
            appInitialized = true;
            
            // 1. Hide loading screen immediately
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
            
            // 2. Ensure dashboard is visible by default
            const dashboard = document.getElementById('dashboard');
            if (dashboard) {
                dashboard.classList.remove('hidden');
                dashboard.classList.add('active');
            }
            
            // 3. Hide other sections
            const sections = document.querySelectorAll('.section:not(#dashboard)');
            sections.forEach(function(section) {
                section.classList.add('hidden');
                section.classList.remove('active');
            });
              // 4. Set dashboard navigation as active
            updateNavigation('dashboard');
            
            // 5. Add click event listeners to all navigation buttons (without eval)
            const navButtons = document.querySelectorAll('[data-section]');
            navButtons.forEach(function(button) {
                if (!button.dataset.initialized) {
                    button.dataset.initialized = 'true';
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        const section = button.getAttribute('data-section');
                        showSection(section);
                    });
                }
            });
            
            // 6. Add auth modal button listeners (without eval)
            const loginButtons = document.querySelectorAll('[onclick*="showAuthModal(\'login\')"]');
            loginButtons.forEach(function(button) {
                if (!button.dataset.initialized) {
                    button.dataset.initialized = 'true';
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        showAuthModal('login');
                    });
                }
            });
            
            const registerButtons = document.querySelectorAll('[onclick*="showAuthModal(\'register\')"]');
            registerButtons.forEach(function(button) {
                if (!button.dataset.initialized) {
                    button.dataset.initialized = 'true';
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        showAuthModal('register');
                    });
                }
            });
            
            // 7. Add other button listeners
            const userMenuButton = document.querySelector('[onclick*="toggleUserMenu"]');
            if (userMenuButton && !userMenuButton.dataset.initialized) {
                userMenuButton.dataset.initialized = 'true';
                userMenuButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleUserMenu();
                });
            }
            
            const mobileMenuButton = document.querySelector('[onclick*="toggleMobileMenu"]');
            if (mobileMenuButton && !mobileMenuButton.dataset.initialized) {
                mobileMenuButton.dataset.initialized = 'true';
                mobileMenuButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleMobileMenu();
                });
            }
            
            const closeModalButtons = document.querySelectorAll('[onclick*="closeAuthModal"]');
            closeModalButtons.forEach(function(button) {
                if (!button.dataset.initialized) {
                    button.dataset.initialized = 'true';
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        closeAuthModal();
                    });
                }
            });
            
            const dismissAlertButtons = document.querySelectorAll('[onclick*="dismissAlert"]');
            dismissAlertButtons.forEach(function(button) {
                if (!button.dataset.initialized) {
                    button.dataset.initialized = 'true';
                    const alertId = button.getAttribute('onclick').match(/dismissAlert\('([^']+)'\)/);
                    if (alertId) {
                        button.addEventListener('click', function(e) {
                            e.preventDefault();
                            dismissAlert(alertId[1]);
                        });
                    }
                }
            });
            
            // 8. Setup auth form toggle
            const authToggleButton = document.getElementById('authToggleButton');
            if (authToggleButton && !authToggleButton.dataset.initialized) {
                authToggleButton.dataset.initialized = 'true';
                authToggleButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleAuthForm();
                });
                updateAuthToggleText();
            }
          }

        // Single initialization point to prevent duplicates
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }        
        // Emergency initialization only if app wasn't initialized
        setTimeout(function() {
            if (!appInitialized) {
                initializeApp();
            }
        }, 2000);

        // ===== MODELS SECTION FUNCTIONS =====
        
        // Refresh models data
        async function refreshModels() {
            const loadingElement = document.getElementById('modelsLoading');
            const emptyElement = document.getElementById('modelsEmpty');
            const listElement = document.getElementById('modelsList');
            const modelsCountElement = document.getElementById('modelsCount');
            
            if (loadingElement) loadingElement.classList.remove('hidden');
            if (emptyElement) emptyElement.classList.add('hidden');
            
            try {
                const response = await fetch('/api/models');
                const models = await response.json();
                
                if (loadingElement) loadingElement.classList.add('hidden');
                
                if (models && models.length > 0) {
                    displayModels(models);
                    updateModelMetrics(models);
                    if (modelsCountElement) {
                        modelsCountElement.textContent = `${models.length} models found`;
                    }
                } else {
                    if (emptyElement) emptyElement.classList.remove('hidden');
                    if (modelsCountElement) {
                        modelsCountElement.textContent = 'No models available';
                    }
                }
            } catch (error) {
                if (loadingElement) loadingElement.classList.add('hidden');
                if (emptyElement) emptyElement.classList.remove('hidden');
                if (modelsCountElement) {
                    modelsCountElement.textContent = 'Error loading models';
                }
            }
        }
        
        // Display models in grid or list view
        function displayModels(models) {
            const container = document.getElementById('modelsList');
            if (!container) return;
            
            const isListView = container.classList.contains('list-view');
            
            container.innerHTML = models.map(model => `
                <div class="model-card ${model.status}">
                    <div class="model-header">
                        <h3 class="model-name">${model.name}</h3>
                        <span class="model-status ${model.status}">${model.status}</span>
                    </div>
                    
                    <div class="model-info">
                        <div class="model-info-item">
                            <span class="model-info-label">Provider</span>
                            <span class="model-info-value">${model.provider || 'Unknown'}</span>
                        </div>
                        <div class="model-info-item">
                            <span class="model-info-label">Type</span>
                            <span class="model-info-value">${model.type || 'General'}</span>
                        </div>
                        <div class="model-info-item">
                            <span class="model-info-label">Response Time</span>
                            <span class="model-info-value">${model.responseTime || 'N/A'}</span>
                        </div>
                        <div class="model-info-item">
                            <span class="model-info-label">Usage</span>
                            <span class="model-info-value">${model.usage || '0'} req/day</span>
                        </div>
                    </div>
                    
                    <div class="model-actions">
                        <button class="model-btn" onclick="testModel('${model.id}')">
                            <i class="fas fa-vial"></i>
                            Test
                        </button>
                        <button class="model-btn" onclick="configureModel('${model.id}')">
                            <i class="fas fa-cog"></i>
                            Configure
                        </button>
                        <button class="model-btn primary" onclick="selectModel('${model.id}')">
                            <i class="fas fa-check"></i>
                            Use
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // Update model metrics
        function updateModelMetrics(models) {
            const onlineModels = models.filter(m => m.status === 'online').length;
            const totalModels = models.length;
            const avgResponseTime = models.reduce((acc, m) => acc + (parseInt(m.responseTime) || 0), 0) / totalModels;
            
            const onlineElement = document.getElementById('modelsOnline');
            const totalElement = document.getElementById('totalModels');
            const responseElement = document.getElementById('avgResponseTime');
            
            if (onlineElement) onlineElement.textContent = onlineModels;
            if (totalElement) totalElement.textContent = totalModels;
            if (responseElement) responseElement.textContent = Math.round(avgResponseTime) + 'ms';
        }
        
        // Toggle between grid and list view
        function toggleModelsView(view) {
            const container = document.getElementById('modelsList');
            const gridBtn = document.getElementById('modelsGridView');
            const listBtn = document.getElementById('modelsListView');
            
            if (!container) return;
            
            if (view === 'grid') {
                container.classList.remove('list-view');
                container.classList.add('grid-view');
                if (gridBtn) gridBtn.classList.add('active');
                if (listBtn) listBtn.classList.remove('active');
            } else {
                container.classList.remove('grid-view');
                container.classList.add('list-view');
                if (listBtn) listBtn.classList.add('active');
                if (gridBtn) gridBtn.classList.remove('active');
            }
        }
        
        // Test a specific model
        async function testModel(modelId) {
            try {
                const response = await fetch(`/api/models/${modelId}/test`, {
                    method: 'POST'
                });
                const result = await response.json();
                
                if (result.success) {
                    showNotification('Model test successful', 'success');
                } else {
                    showNotification('Model test failed: ' + (result.error || 'Unknown error'), 'error');
                }
            } catch (error) {
                showNotification('Failed to test model', 'error');
            }
        }
        
        // Configure a specific model
        function configureModel(modelId) {
            showNotification('Model configuration coming soon', 'info');
        }
        
        // Select a model for use
        function selectModel(modelId) {
            // Update model select dropdowns
            const selects = document.querySelectorAll('select[name="model"], #modelSelectGenerate, #modelSelectAnalyze');
            selects.forEach(select => {
                select.value = modelId;
            });
            
            showNotification('Model selected successfully', 'success');
        }
        
        // Add custom model
        function addCustomModel() {
            showNotification('Custom model addition coming soon', 'info');
        }
        
        // Show model configuration modal
        function showModelConfiguration() {
            showNotification('Model configuration panel coming soon', 'info');
        }
        
        // Initialize models view toggle
        function initializeModelsView() {
            const gridBtn = document.getElementById('modelsGridView');
            const listBtn = document.getElementById('modelsListView');
            const filterSelect = document.getElementById('modelFilter');
            
            if (gridBtn) {
                gridBtn.addEventListener('click', () => toggleModelsView('grid'));
            }
            
            if (listBtn) {
                listBtn.addEventListener('click', () => toggleModelsView('list'));
            }
            
            if (filterSelect) {
                filterSelect.addEventListener('change', (e) => {
                    filterModels(e.target.value);
                });
            }
        }
        
        // Filter models by type
        function filterModels(filter) {
            const cards = document.querySelectorAll('.model-card');
            
            cards.forEach(card => {
                const modelName = card.querySelector('.model-name').textContent.toLowerCase();
                const provider = card.querySelector('.model-info-value').textContent.toLowerCase();
                
                let show = true;
                
                switch (filter) {
                    case 'online':
                        show = card.classList.contains('online');
                        break;
                    case 'offline':
                        show = card.classList.contains('offline');
                        break;
                    case 'gpt':
                        show = modelName.includes('gpt') || provider.includes('openai');
                        break;
                    case 'claude':
                        show = modelName.includes('claude') || provider.includes('anthropic');
                        break;
                    case 'codellama':
                        show = modelName.includes('llama') || modelName.includes('code');
                        break;
                    default:
                        show = true;
                }
                
                card.style.display = show ? 'block' : 'none';
            });
        }
          // Initialize models section when the section is shown
        document.addEventListener('DOMContentLoaded', () => {
            initializeModelsView();
            
            // Auto-refresh models when section is shown
            const originalShowSection = window.showSection;
            window.showSection = function(sectionName) {
                if (originalShowSection) originalShowSection(sectionName);
                
                if (sectionName === 'models') {
                    setTimeout(() => refreshModels(), 100);
                }
            };
        });

        // ===== MISSING PROJECT FUNCTIONS =====
        
        // Import project functionality
        function importProject() {
            if (window.ui && typeof window.ui.showToast === 'function') {
                window.ui.showToast('Import project functionality coming soon', 'info');
            } else {
                alert('Import project functionality coming soon');
            }
        }
        
        // Create new project
        function createProject() {
            const modal = document.getElementById('newProjectModal');
            if (modal) {
                modal.classList.remove('hidden');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
        
        // View project details
        function viewProject(projectId) {
            if (window.ui && typeof window.ui.showToast === 'function') {
                window.ui.showToast(`Viewing project: ${projectId}`, 'info');
            } else {
                console.log('View project:', projectId);
            }
        }
        
        // Edit project
        function editProject(projectId) {
            const modal = document.getElementById('editProjectModal');
            if (modal) {
                // Populate form with project data
                document.getElementById('editProjectId').value = projectId;
                modal.classList.remove('hidden');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
        
        // Delete project
        async function deleteProject(projectId) {
            if (!confirm('Are you sure you want to delete this project? This action cannot be undone.')) {
                return;
            }
            
            try {
                const response = await fetch(`/api/projects/${projectId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    showNotification('Project deleted successfully', 'success');
                    // Refresh projects list
                    if (typeof refreshProjects === 'function') {
                        refreshProjects();
                    }
                } else {
                    throw new Error('Failed to delete project');
                }
            } catch (error) {
                showNotification('Failed to delete project', 'error');
            }
        }
        
        // Archive project
        async function archiveProject(projectId) {
            try {
                const response = await fetch(`/api/projects/${projectId}/archive`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    showNotification('Project archived successfully', 'success');
                    if (typeof refreshProjects === 'function') {
                        refreshProjects();
                    }
                } else {
                    throw new Error('Failed to archive project');
                }
            } catch (error) {
                showNotification('Failed to archive project', 'error');
            }
        }
        
        // Clone project
        async function cloneProject(projectId) {
            try {
                const response = await fetch(`/api/projects/${projectId}/clone`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showNotification(`Project cloned as: ${result.name}`, 'success');
                    if (typeof refreshProjects === 'function') {
                        refreshProjects();
                    }
                } else {
                    throw new Error('Failed to clone project');
                }
            } catch (error) {
                showNotification('Failed to clone project', 'error');
            }
        }
        
        // Show notification function
        function showNotification(message, type = 'info') {
            if (window.ui && typeof window.ui.showToast === 'function') {
                window.ui.showToast(message, type);
            } else {
                // Fallback notification
                const toast = document.createElement('div');
                toast.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${getToastClasses(type)}`;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 5000);
            }
        }
        
        function getToastClasses(type) {
            switch (type) {
                case 'success':
                    return 'bg-green-500 text-white';
                case 'error':
                    return 'bg-red-500 text-white';
                case 'warning':
                    return 'bg-orange-500 text-white';
                default:
                    return 'bg-blue-500 text-white';
            }
        }
        
        // ===== SERVICE WORKER REGISTRATION =====
        
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/static/sw.js');
                    console.log('Service worker registered successfully');
                    
                    // Handle service worker updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // Show update available notification
                                showNotification('App update available. Refresh to apply.', 'info');
                            }
                        });
                    });
                } catch (error) {
                    console.error('Service worker registration failed:', error);
                }
            });
        }
    </script>
</body>
</html>
